<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gazel Store Global Services Limited - Customer Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="icon" href="img/gazelmainlogo.png">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="/img/gazelmainlogo.png" alt="">
            </div>
            <div class="user-info">
                <div class="user-avatar">JD</div>
                <div class="user-details">
                    <h3>John Doe</h3>
                    <p>Customer Account</p>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon pending">‚è≥</div>
                <div class="stat-info">
                    <h3 id="pending-count">2</h3>
                    <p>Pending Orders</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon confirmed">‚úÖ</div>
                <div class="stat-info">
                    <h3 id="confirmed-count">1</h3>
                    <p>Confirmed Orders</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon delivering">üöö</div>
                <div class="stat-info">
                    <h3 id="delivering-count">1</h3>
                    <p>On the Way</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon completed">üéâ</div>
                <div class="stat-info">
                    <h3 id="completed-count">5</h3>
                    <p>Completed</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Products Section -->
            <div class="section">
                <div class="section-header">
                    <h2>ü•§ Available Drinks</h2>
                    <button class="btn btn-primary" onclick="openCart()">
                        üõí View Cart (<span id="cart-count">0</span>)
                    </button>
                </div>
                <div class="products-grid" id="products-grid">
                    <!-- Products will be loaded here -->
                </div>
            </div>

            <!-- My Orders Section -->
            <div class="section">
                <div class="section-header">
                    <h2>üì¶ My Orders</h2>
                </div>
                <div class="orders-list" id="orders-list">
                    <!-- Orders will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal" id="order-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõí Your Cart</h2>
                <button class="close-btn" onclick="closeCart()">&times;</button>
            </div>
            
            <div id="cart-items">
                <!-- Cart items will be loaded here -->
            </div>

            <div class="order-summary">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="subtotal">‚Ç¶0</span>
                </div>
                <div class="summary-row">
                    <span>Delivery Fee:</span>
                    <span id="delivery-fee">‚Ç¶500</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="total">‚Ç¶0</span>
                </div>
            </div>

            <form onsubmit="placeOrder(event)" style="margin-top: 20px;">
                <div class="form-group">
                    <label class="form-label">Delivery Address</label>
                    <textarea class="form-textarea" placeholder="Enter your complete delivery address" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" placeholder="+234 800 000 0000" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Additional Notes (Optional)</label>
                    <textarea class="form-textarea" placeholder="Any special instructions?"></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 14px;">
                    Place Order
                </button>
            </form>
        </div>
    </div>

    <script>
        // Sample Products Data
        const products = [
            { id: 1, name: 'Coca Cola', icon: 'ü•§', price: 300, stock: 50 },
            { id: 2, name: 'Pepsi', icon: 'ü•§', price: 300, stock: 45 },
            { id: 3, name: 'Sprite', icon: 'ü•§', price: 300, stock: 40 },
            { id: 4, name: 'Fanta', icon: 'üçä', price: 300, stock: 35 },
            { id: 5, name: 'Water', icon: 'üíß', price: 150, stock: 100 },
            { id: 6, name: 'Energy Drink', icon: '‚ö°', price: 500, stock: 30 },
            { id: 7, name: 'Orange Juice', icon: 'üçä', price: 400, stock: 25 },
            { id: 8, name: 'Apple Juice', icon: 'üçé', price: 400, stock: 25 }
        ];

        // Sample Orders Data
        const orders = [
            {
                id: 'ORD-001',
                items: '3x Coca Cola, 2x Water',
                total: 1200,
                status: 'on-way',
                date: '2024-12-02',
                driver: { name: 'Michael Smith', phone: '+234 801 234 5678' }
            },
            {
                id: 'ORD-002',
                items: '5x Pepsi',
                total: 1500,
                status: 'confirmed',
                date: '2024-12-02'
            },
            {
                id: 'ORD-003',
                items: '2x Energy Drink',
                total: 1000,
                status: 'pending',
                date: '2024-12-01'
            },
            {
                id: 'ORD-004',
                items: '4x Sprite, 1x Fanta',
                total: 1500,
                status: 'delivered',
                date: '2024-11-30'
            }
        ];

        let cart = [];

        // Load Products
        function loadProducts() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-icon">${product.icon}</div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">‚Ç¶${product.price}</div>
                    <div class="product-stock">${product.stock} in stock</div>
                    <button class="btn-add" onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''}>
                        ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                    </button>
                </div>
            `).join('');
        }

        // Load Orders
        function loadOrders() {
            const ordersList = document.getElementById('orders-list');
            if (orders.length === 0) {
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üì¶</div>
                        <p>No orders yet. Start shopping!</p>
                    </div>
                `;
                return;
            }

            ordersList.innerHTML = orders.map(order => `
                <div class="order-card">
                    <div class="order-header">
                        <div class="order-id">${order.id}</div>
                        <div class="order-status status-${order.status.replace('-', '')}">
                            ${order.status === 'pending' ? '‚è≥ Pending' : 
                              order.status === 'confirmed' ? '‚úÖ Confirmed' : 
                              order.status === 'on-way' ? 'üöö On the Way' : 
                              'üéâ Delivered'}
                        </div>
                    </div>
                    <div class="order-items">${order.items}</div>
                    <div class="order-total">Total: ‚Ç¶${order.total}</div>
                    <div class="order-date">Ordered on ${order.date}</div>
                    ${order.driver ? `
                        <div class="driver-info">
                            <strong>Driver:</strong> ${order.driver.name}<br>
                            <strong>Phone:</strong> ${order.driver.phone}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Add to Cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            updateCartCount();
            alert(`${product.name} added to cart!`);
        }

        // Update Cart Count
        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        // Open Cart Modal
        function openCart() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }

            const modal = document.getElementById('order-modal');
            const cartItems = document.getElementById('cart-items');
            
            cartItems.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.icon} ${item.name}</div>
                        <div class="cart-item-price">‚Ç¶${item.price} each</div>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="decreaseQuantity(${index})">-</button>
                        <span class="quantity-display">${item.quantity}</span>
                        <button class="quantity-btn" onclick="increaseQuantity(${index})">+</button>
                        <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
                    </div>
                </div>
            `).join('');

            updateOrderSummary();
            modal.classList.add('active');
        }

        // Close Cart Modal
        function closeCart() {
            document.getElementById('order-modal').classList.remove('active');
        }

        // Increase Quantity
        function increaseQuantity(index) {
            cart[index].quantity++;
            openCart();
        }

        // Decrease Quantity
        function decreaseQuantity(index) {
            if (cart[index].quantity > 1) {
                cart[index].quantity--;
                openCart();
            }
        }

        // Remove from Cart
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartCount();
            if (cart.length === 0) {
                closeCart();
            } else {
                openCart();
            }
        }

        // Update Order Summary
        function updateOrderSummary() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const deliveryFee = 500;
            const total = subtotal + deliveryFee;

            document.getElementById('subtotal').textContent = `‚Ç¶${subtotal}`;
            document.getElementById('total').textContent = `‚Ç¶${total}`;
        }

        // Place Order
        function placeOrder(e) {
            e.preventDefault();
            
            const newOrder = {
                id: `ORD-${String(orders.length + 1).padStart(3, '0')}`,
                items: cart.map(item => `${item.quantity}x ${item.name}`).join(', '),
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) + 500,
                status: 'pending',
                date: new Date().toISOString().split('T')[0]
            };

            orders.unshift(newOrder);
            cart = [];
            updateCartCount();
            loadOrders();
            closeCart();

            alert('Order placed successfully! The admin will confirm your order shortly.');
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = 'index.html';
            }
        }

        // Initialize
        loadProducts();
        loadOrders();
    </script>
</body>
</html>