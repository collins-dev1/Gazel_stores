<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DrinkFlow - Admin Dashboard</title>
    <link rel="stylesheet" href="css/admin_dashboard.css" />
     <link rel="icon" href="img/gazelmainlogo.png">
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
        <div class="logo">
          <img src="/img/gazelmainlogo.png" alt="" />
        </div>
        <div class="header-right">
          <div class="notifications" onclick="showNotifications()">
            <span style="font-size: 24px">üîî</span>
            <span class="notification-badge" id="notification-count">3</span>
          </div>
          <div class="user-info">
            <div class="user-avatar">AD</div>
            <div>
              <div style="font-weight: 600">Admin User</div>
              <div style="font-size: 12px; opacity: 0.9">Administrator</div>
            </div>
          </div>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
      </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-menu">
        <div class="menu-item active" onclick="showPage('dashboard')">
          <span class="menu-icon">üìä</span>
          <span>Dashboard</span>
        </div>
        <div class="menu-item" onclick="showPage('orders')">
          <span class="menu-icon">üì¶</span>
          <span>Orders</span>
        </div>
        <div class="menu-item" onclick="showPage('inventory')">
          <span class="menu-icon">ü•§</span>
          <span>Inventory</span>
        </div>
        <div class="menu-item" onclick="showPage('drivers')">
          <span class="menu-icon">üöö</span>
          <span>Drivers</span>
        </div>
        <div class="menu-item" onclick="showPage('customers')">
          <span class="menu-icon">üë•</span>
          <span>Customers</span>
        </div>
        <div class="menu-item" onclick="showPage('analytics')">
          <span class="menu-icon">üìà</span>
          <span>Analytics</span>
        </div>
        <div class="menu-item" onclick="showPage('settings')">
          <span class="menu-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </div>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Dashboard Page -->
        <div id="dashboard" class="page-section active">
          <h1 style="margin-bottom: 25px; font-size: 28px">
            Dashboard Overview
          </h1>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon orange">üì¶</div>
              <div class="stat-info">
                <h3 id="total-orders">24</h3>
                <p>Total Orders</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon blue">‚è≥</div>
              <div class="stat-info">
                <h3 id="pending-orders">5</h3>
                <p>Pending Orders</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon green">üí∞</div>
              <div class="stat-info">
                <h3>‚Ç¶45,600</h3>
                <p>Total Revenue</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon purple">üë•</div>
              <div class="stat-info">
                <h3>18</h3>
                <p>Total Customers</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon teal">ü•§</div>
              <div class="stat-info">
                <h3>8</h3>
                <p>Products</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon red">üöö</div>
              <div class="stat-info">
                <h3>4</h3>
                <p>Active Drivers</p>
              </div>
            </div>
          </div>

          <div class="section-card">
            <div class="section-header">
              <h2>Recent Orders</h2>
              <button class="btn btn-primary" onclick="showPage('orders')">
                View All
              </button>
            </div>
            <div class="table-container">
              <table class="data-table" id="recent-orders-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Items</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Will be populated by JavaScript -->
                </tbody>
              </table>
            </div>
            <div class="table-cards" id="recent-orders-cards">
              <!-- Will be populated by JavaScript for mobile -->
            </div>
          </div>
        </div>

        <!-- Orders Page -->
        <div id="orders" class="page-section">
          <h1 style="margin-bottom: 25px; font-size: 28px">Order Management</h1>

          <div class="section-card">
            <div class="search-filter">
              <input
                type="text"
                class="search-box"
                placeholder="Search orders..."
                oninput="filterOrders(this.value)"
              />
              <select
                class="form-select"
                style="max-width: 200px"
                onchange="filterOrdersByStatus(this.value)"
              >
                <option value="">All Status</option>
                <option value="pending">Pending</option>
                <option value="confirmed">Confirmed</option>
                <option value="on-way">On the Way</option>
                <option value="delivered">Delivered</option>
              </select>
            </div>

            <div class="table-container">
                <table class="data-table" id="all-orders-table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Phone</th>
                  <th>Items</th>
                  <th>Total</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Will be populated by JavaScript -->
              </tbody>
            </table>
            </div>
          </div>
        </div>

        <!-- Inventory Page -->
        <div id="inventory" class="page-section">
          <h1 style="margin-bottom: 25px; font-size: 28px">
            Inventory Management
          </h1>

          <div class="section-card">
            <div class="section-header">
              <h2>Products</h2>
              <button class="btn btn-primary" onclick="openAddProductModal()">
                + Add Product
              </button>
            </div>

            <div class="product-grid" id="products-list">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Drivers Page -->
        <div id="drivers" class="page-section">
          <h1 style="margin-bottom: 25px; font-size: 28px">
            Driver Management
          </h1>

          <div class="section-card">
            <div class="section-header">
              <h2>Drivers</h2>
              <button class="btn btn-primary" onclick="openAddDriverModal()">
                + Add Driver
              </button>
            </div>

            <div class="driver-list" id="drivers-list">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Customers Page -->
        <div id="customers" class="page-section">
          <h1 style="margin-bottom: 25px; font-size: 28px">
            Customer Management
          </h1>

          <div class="section-card">
            <div class="search-filter">
              <input
                type="text"
                class="search-box"
                placeholder="Search customers..."
              />
            </div>

            <div class="table-container">
                <table class="data-table">
              <thead>
                <tr>
                  <th>Customer Name</th>
                  <th>Email</th>
                  <th>Phone</th>
                  <th>Total Orders</th>
                  <th>Total Spent</th>
                  <th>Joined</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="customers-table">
                <!-- Will be populated by JavaScript -->
              </tbody>
            </table>
            </div>
          </div>
        </div>

        <!-- Analytics Page -->
        <div id="analytics" class="page-section">
          <h1 style="margin-bottom: 25px; font-size: 28px">
            Analytics & Reports
          </h1>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon green">üìà</div>
              <div class="stat-info">
                <h3>‚Ç¶125,400</h3>
                <p>This Month</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon blue">üìä</div>
              <div class="stat-info">
                <h3>48</h3>
                <p>Orders This Month</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon purple">‚≠ê</div>
              <div class="stat-info">
                <h3>‚Ç¶2,612</h3>
                <p>Avg Order Value</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon orange">üî•</div>
              <div class="stat-info">
                <h3>Coca Cola</h3>
                <p>Best Seller</p>
              </div>
            </div>
          </div>

          <div class="section-card">
            <div class="section-header">
              <h2>Sales Overview</h2>
            </div>
            <div class="chart-container">
              <div class="chart-placeholder">üìà Sales Chart (Last 7 Days)</div>
            </div>
          </div>

          <div class="section-card">
            <div class="section-header">
              <h2>Top Products</h2>
            </div>
            <div class="table-container">
                <table class="data-table">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Units Sold</th>
                  <th>Revenue</th>
                  <th>Stock</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>ü•§ Coca Cola</td>
                  <td>45</td>
                  <td>‚Ç¶13,500</td>
                  <td>50</td>
                </tr>
                <tr>
                  <td>ü•§ Pepsi</td>
                  <td>38</td>
                  <td>‚Ç¶11,400</td>
                  <td>45</td>
                </tr>
                <tr>
                  <td>üíß Water</td>
                  <td>52</td>
                  <td>‚Ç¶7,800</td>
                  <td>100</td>
                </tr>
                <tr>
                  <td>‚ö° Energy Drink</td>
                  <td>28</td>
                  <td>‚Ç¶14,000</td>
                  <td>30</td>
                </tr>
              </tbody>
            </table>
            </div>
          </div>
        </div>

        <!-- Settings Page -->
        <div id="settings" class="page-section">
          <h1 style="margin-bottom: 25px; font-size: 28px">Settings</h1>

          <div class="section-card">
            <div class="section-header">
              <h2>Business Information</h2>
            </div>
            <form onsubmit="saveBusinessSettings(event)">
              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label">Business Name</label>
                  <input
                    type="text"
                    class="form-input"
                    value="DrinkFlow Company"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Phone Number</label>
                  <input
                    type="tel"
                    class="form-input"
                    value="+234 800 000 0000"
                    required
                  />
                </div>
                <div class="form-group full-width">
                  <label class="form-label">Email Address</label>
                  <input
                    type="email"
                    class="form-input"
                    value="info@drinkflow.com"
                    required
                  />
                </div>
                <div class="form-group full-width">
                  <label class="form-label">Business Address</label>
                  <textarea class="form-textarea">
123 Business Street, Port Harcourt, Rivers State, Nigeria</textarea
                  >
                </div>
              </div>
              <button type="submit" class="btn btn-primary">
                Save Changes
              </button>
            </form>
          </div>

          <div class="section-card">
            <div class="section-header">
              <h2>Delivery Settings</h2>
            </div>
            <form onsubmit="saveDeliverySettings(event)">
              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label">Delivery Fee (‚Ç¶)</label>
                  <input
                    type="number"
                    class="form-input"
                    value="500"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">Free Delivery Threshold (‚Ç¶)</label>
                  <input type="number" class="form-input" value="5000" />
                </div>
                <div class="form-group full-width">
                  <label class="form-label">Delivery Hours</label>
                  <input
                    type="text"
                    class="form-input"
                    value="8:00 AM - 8:00 PM"
                  />
                </div>
              </div>
              <button type="submit" class="btn btn-primary">
                Save Changes
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Order Details Modal -->
    <div class="modal" id="order-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Order Details</h2>
          <button class="close-btn" onclick="closeModal('order-modal')">
            &times;
          </button>
        </div>
        <div id="order-details-content">
          <!-- Will be populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Assign Driver Modal -->
    <div class="modal" id="assign-driver-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Assign Driver</h2>
          <button class="close-btn" onclick="closeModal('assign-driver-modal')">
            &times;
          </button>
        </div>
        <form onsubmit="assignDriver(event)">
          <input type="hidden" id="assign-order-id" />
          <div class="form-group">
            <label class="form-label">Select Driver</label>
            <select class="form-select" id="driver-select" required>
              <!-- Will be populated dynamically -->
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Estimated Delivery Time</label>
            <input type="time" class="form-input" required />
          </div>
          <div class="form-group">
            <label class="form-label">Additional Notes</label>
            <textarea
              class="form-textarea"
              placeholder="Any special instructions for the driver..."
            ></textarea>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Assign Driver
          </button>
        </form>
      </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div class="modal" id="product-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="product-modal-title">Add Product</h2>
          <button class="close-btn" onclick="closeModal('product-modal')">
            &times;
          </button>
        </div>
        <form onsubmit="saveProduct(event)">
          <input type="hidden" id="product-id" />
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">Product Name</label>
              <input
                type="text"
                class="form-input"
                id="product-name"
                required
              />
            </div>
            <div class="form-group">
              <label class="form-label">Icon (Emoji)</label>
              <input
                type="text"
                class="form-input"
                id="product-icon"
                placeholder="ü•§"
                maxlength="2"
                required
              />
            </div>
            <div class="form-group">
              <label class="form-label">Price (‚Ç¶)</label>
              <input
                type="number"
                class="form-input"
                id="product-price"
                required
              />
            </div>
            <div class="form-group">
              <label class="form-label">Stock Quantity</label>
              <input
                type="number"
                class="form-input"
                id="product-stock"
                required
              />
            </div>
            <div class="form-group full-width">
              <label class="form-label">Description (Optional)</label>
              <textarea
                class="form-textarea"
                id="product-description"
              ></textarea>
            </div>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Save Product
          </button>
        </form>
      </div>
    </div>

    <!-- Add/Edit Driver Modal -->
    <div class="modal" id="driver-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="driver-modal-title">Add Driver</h2>
          <button class="close-btn" onclick="closeModal('driver-modal')">
            &times;
          </button>
        </div>
        <form onsubmit="saveDriver(event)">
          <input type="hidden" id="driver-id" />
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">Full Name</label>
              <input type="text" class="form-input" id="driver-name" required />
            </div>
            <div class="form-group">
              <label class="form-label">Phone Number</label>
              <input type="tel" class="form-input" id="driver-phone" required />
            </div>
            <div class="form-group">
              <label class="form-label">Vehicle Type</label>
              <select class="form-select" id="driver-vehicle" required>
                <option value="">Select vehicle</option>
                <option value="Motorcycle">Motorcycle</option>
                <option value="Car">Car</option>
                <option value="Van">Van</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">License Plate</label>
              <input
                type="text"
                class="form-input"
                id="driver-plate"
                required
              />
            </div>
            <div class="form-group full-width">
              <label class="form-label">Status</label>
              <select class="form-select" id="driver-status">
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
              </select>
            </div>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Save Driver
          </button>
        </form>
      </div>
    </div>

    <script>
      // Sample Data
      let orders = [
        {
          id: "ORD-001",
          customer: "John Doe",
          phone: "+234 801 234 5678",
          email: "john@email.com",
          items: "3x Coca Cola, 2x Water",
          total: 1700,
          status: "pending",
          date: "2024-12-09",
          address: "123 Main St, Port Harcourt",
        },
        {
          id: "ORD-002",
          customer: "Jane Smith",
          phone: "+234 802 345 6789",
          email: "jane@email.com",
          items: "5x Pepsi",
          total: 2000,
          status: "confirmed",
          date: "2024-12-09",
          address: "456 Oak Ave, Port Harcourt",
        },
        {
          id: "ORD-003",
          customer: "Mike Johnson",
          phone: "+234 803 456 7890",
          email: "mike@email.com",
          items: "2x Energy Drink",
          total: 1500,
          status: "on-way",
          date: "2024-12-08",
          address: "789 Elm Rd, Port Harcourt",
          driver: "Michael Smith",
        },
        {
          id: "ORD-004",
          customer: "Sarah Wilson",
          phone: "+234 804 567 8901",
          email: "sarah@email.com",
          items: "4x Sprite, 1x Fanta",
          total: 1800,
          status: "delivered",
          date: "2024-12-07",
          address: "321 Pine St, Port Harcourt",
        },
        {
          id: "ORD-005",
          customer: "David Brown",
          phone: "+234 805 678 9012",
          email: "david@email.com",
          items: "6x Water, 2x Orange Juice",
          total: 1700,
          status: "pending",
          date: "2024-12-09",
          address: "654 Maple Dr, Port Harcourt",
        },
      ];

      let products = [
        { id: 1, name: "Coca Cola", icon: "ü•§", price: 300, stock: 50 },
        { id: 2, name: "Pepsi", icon: "ü•§", price: 300, stock: 45 },
        { id: 3, name: "Sprite", icon: "ü•§", price: 300, stock: 40 },
        { id: 4, name: "Fanta", icon: "üçä", price: 300, stock: 35 },
        { id: 5, name: "Water", icon: "üíß", price: 150, stock: 100 },
        { id: 6, name: "Energy Drink", icon: "‚ö°", price: 500, stock: 30 },
        { id: 7, name: "Orange Juice", icon: "üçä", price: 400, stock: 25 },
        { id: 8, name: "Apple Juice", icon: "üçé", price: 400, stock: 25 },
      ];

      let drivers = [
        {
          id: 1,
          name: "Michael Smith",
          phone: "+234 801 234 5678",
          vehicle: "Motorcycle",
          plate: "ABC-123",
          status: "active",
        },
        {
          id: 2,
          name: "James Wilson",
          phone: "+234 802 345 6789",
          vehicle: "Car",
          plate: "DEF-456",
          status: "active",
        },
        {
          id: 3,
          name: "Robert Brown",
          phone: "+234 803 456 7890",
          vehicle: "Van",
          plate: "GHI-789",
          status: "active",
        },
        {
          id: 4,
          name: "William Davis",
          phone: "+234 804 567 8901",
          vehicle: "Motorcycle",
          plate: "JKL-012",
          status: "inactive",
        },
      ];

      let customers = [
        {
          id: 1,
          name: "John Doe",
          email: "john@email.com",
          phone: "+234 801 234 5678",
          orders: 5,
          spent: 8500,
          joined: "2024-10-15",
        },
        {
          id: 2,
          name: "Jane Smith",
          email: "jane@email.com",
          phone: "+234 802 345 6789",
          orders: 8,
          spent: 15200,
          joined: "2024-09-20",
        },
        {
          id: 3,
          name: "Mike Johnson",
          email: "mike@email.com",
          phone: "+234 803 456 7890",
          orders: 3,
          spent: 4500,
          joined: "2024-11-05",
        },
        {
          id: 4,
          name: "Sarah Wilson",
          email: "sarah@email.com",
          phone: "+234 804 567 8901",
          orders: 12,
          spent: 22400,
          joined: "2024-08-10",
        },
      ];

      let allOrders = [...orders];

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        loadRecentOrders();
        loadAllOrders();
        loadProducts();
        loadDrivers();
        loadCustomers();
        updateStats();
      });

      // Navigation
      function showPage(page) {
        document.querySelectorAll(".page-section").forEach((section) => {
          section.classList.remove("active");
        });
        document.querySelectorAll(".menu-item").forEach((item) => {
          item.classList.remove("active");
        });

        document.getElementById(page).classList.add("active");
        event.target.closest(".menu-item").classList.add("active");

        // Close mobile sidebar
        if (window.innerWidth <= 1024) {
          document.getElementById("sidebar").classList.remove("mobile-open");
        }
      }

      function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("mobile-open");
      }

      // Load Recent Orders
      function loadRecentOrders() {
        const tbody = document.querySelector("#recent-orders-table tbody");
        const recentOrders = orders.slice(0, 5);

        tbody.innerHTML = recentOrders
          .map(
            (order) => `
                <tr>
                    <td><strong>${order.id}</strong></td>
                    <td>${order.customer}</td>
                    <td>${order.items}</td>
                    <td><strong>‚Ç¶${order.total}</strong></td>
                    <td>${getStatusBadge(order.status)}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="viewOrder('${
                          order.id
                        }')">View</button>
                    </td>
                </tr>
            `
          )
          .join("");
      }

      // Load All Orders
      function loadAllOrders() {
        const tbody = document.querySelector("#all-orders-table tbody");

        if (allOrders.length === 0) {
          tbody.innerHTML =
            '<tr><td colspan="8" class="empty-state"><div class="empty-state-icon">üì¶</div><p>No orders found</p></td></tr>';
          return;
        }

        tbody.innerHTML = allOrders
          .map(
            (order) => `
                <tr>
                    <td><strong>${order.id}</strong></td>
                    <td>${order.customer}</td>
                    <td>${order.phone}</td>
                    <td>${order.items}</td>
                    <td><strong>‚Ç¶${order.total}</strong></td>
                    <td>${getStatusBadge(order.status)}</td>
                    <td>${order.date}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="viewOrder('${
                          order.id
                        }')">View</button>
                        ${
                          order.status === "pending"
                            ? `<button class="btn btn-sm btn-success" onclick="confirmOrder('${order.id}')">Confirm</button>`
                            : ""
                        }
                        ${
                          order.status === "confirmed"
                            ? `<button class="btn btn-sm btn-warning" onclick="openAssignDriver('${order.id}')">Assign</button>`
                            : ""
                        }
                    </td>
                </tr>
            `
          )
          .join("");
      }

      // Filter Orders
      function filterOrders(searchText) {
        searchText = searchText.toLowerCase();
        allOrders = orders.filter(
          (order) =>
            order.id.toLowerCase().includes(searchText) ||
            order.customer.toLowerCase().includes(searchText) ||
            order.items.toLowerCase().includes(searchText)
        );
        loadAllOrders();
      }

      function filterOrdersByStatus(status) {
        if (status === "") {
          allOrders = [...orders];
        } else {
          allOrders = orders.filter((order) => order.status === status);
        }
        loadAllOrders();
      }

      // Status Badge
      function getStatusBadge(status) {
        const badges = {
          pending:
            '<span class="status-badge status-pending">‚è≥ Pending</span>',
          confirmed:
            '<span class="status-badge status-confirmed">‚úÖ Confirmed</span>',
          "on-way":
            '<span class="status-badge status-on-way">üöö On the Way</span>',
          delivered:
            '<span class="status-badge status-delivered">üéâ Delivered</span>',
        };
        return badges[status] || status;
      }

      // View Order Details
      function viewOrder(orderId) {
        const order = orders.find((o) => o.id === orderId);
        if (!order) return;

        const content = document.getElementById("order-details-content");
        content.innerHTML = `
                <div class="order-details">
                    <div class="detail-row">
                        <span class="detail-label">Order ID:</span>
                        <span class="detail-value"><strong>${
                          order.id
                        }</strong></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Customer:</span>
                        <span class="detail-value">${order.customer}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Email:</span>
                        <span class="detail-value">${order.email}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Phone:</span>
                        <span class="detail-value">${order.phone}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Delivery Address:</span>
                        <span class="detail-value">${order.address}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Items:</span>
                        <span class="detail-value">${order.items}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Total:</span>
                        <span class="detail-value"><strong>‚Ç¶${
                          order.total
                        }</strong></span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">${getStatusBadge(
                          order.status
                        )}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Order Date:</span>
                        <span class="detail-value">${order.date}</span>
                    </div>
                    ${
                      order.driver
                        ? `
                        <div class="detail-row">
                            <span class="detail-label">Driver:</span>
                            <span class="detail-value">${order.driver}</span>
                        </div>
                    `
                        : ""
                    }
                </div>
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    ${
                      order.status === "pending"
                        ? `<button class="btn btn-success" onclick="confirmOrder('${order.id}'); closeModal('order-modal');">Confirm Order</button>`
                        : ""
                    }
                    ${
                      order.status === "confirmed"
                        ? `<button class="btn btn-warning" onclick="openAssignDriver('${order.id}'); closeModal('order-modal');">Assign Driver</button>`
                        : ""
                    }
                    ${
                      order.status === "on-way"
                        ? `<button class="btn btn-primary" onclick="markDelivered('${order.id}'); closeModal('order-modal');">Mark as Delivered</button>`
                        : ""
                    }
                </div>
            `;

        openModal("order-modal");
      }

      // Confirm Order
      function confirmOrder(orderId) {
        const order = orders.find((o) => o.id === orderId);
        if (order) {
          order.status = "confirmed";
          loadRecentOrders();
          loadAllOrders();
          updateStats();
          alert(`Order ${orderId} has been confirmed!`);
        }
      }

      // Open Assign Driver Modal
      function openAssignDriver(orderId) {
        document.getElementById("assign-order-id").value = orderId;

        const select = document.getElementById("driver-select");
        const activeDrivers = drivers.filter((d) => d.status === "active");

        select.innerHTML =
          '<option value="">Select a driver</option>' +
          activeDrivers
            .map(
              (d) =>
                `<option value="${d.id}">${d.name} (${d.vehicle} - ${d.plate})</option>`
            )
            .join("");

        openModal("assign-driver-modal");
      }

      // Assign Driver
      function assignDriver(e) {
        e.preventDefault();
        const orderId = document.getElementById("assign-order-id").value;
        const driverId = document.getElementById("driver-select").value;

        const order = orders.find((o) => o.id === orderId);
        const driver = drivers.find((d) => d.id == driverId);

        if (order && driver) {
          order.status = "on-way";
          order.driver = driver.name;

          loadRecentOrders();
          loadAllOrders();
          updateStats();
          closeModal("assign-driver-modal");
          alert(`Driver ${driver.name} has been assigned to order ${orderId}!`);
        }
      }

      // Mark as Delivered
      function markDelivered(orderId) {
        const order = orders.find((o) => o.id === orderId);
        if (order) {
          order.status = "delivered";
          loadRecentOrders();
          loadAllOrders();
          updateStats();
          alert(`Order ${orderId} has been marked as delivered!`);
        }
      }

      // Load Products
      function loadProducts() {
        const grid = document.getElementById("products-list");
        grid.innerHTML = products
          .map(
            (product) => `
                <div class="product-item">
                    <div class="product-item-icon">${product.icon}</div>
                    <div class="product-item-name">${product.name}</div>
                    <div class="product-item-price">‚Ç¶${product.price}</div>
                    <div class="product-item-stock">Stock: ${product.stock}</div>
                    <div class="product-actions">
                        <button class="btn btn-sm btn-primary" onclick="editProduct(${product.id})">Edit</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteProduct(${product.id})">Delete</button>
                    </div>
                </div>
            `
          )
          .join("");
      }

      // Add Product Modal
      function openAddProductModal() {
        document.getElementById("product-modal-title").textContent =
          "Add Product";
        document.getElementById("product-id").value = "";
        document.getElementById("product-name").value = "";
        document.getElementById("product-icon").value = "";
        document.getElementById("product-price").value = "";
        document.getElementById("product-stock").value = "";
        document.getElementById("product-description").value = "";
        openModal("product-modal");
      }

      // Edit Product
      function editProduct(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        document.getElementById("product-modal-title").textContent =
          "Edit Product";
        document.getElementById("product-id").value = product.id;
        document.getElementById("product-name").value = product.name;
        document.getElementById("product-icon").value = product.icon;
        document.getElementById("product-price").value = product.price;
        document.getElementById("product-stock").value = product.stock;
        openModal("product-modal");
      }

      // Save Product
      function saveProduct(e) {
        e.preventDefault();

        const productId = document.getElementById("product-id").value;
        const productData = {
          name: document.getElementById("product-name").value,
          icon: document.getElementById("product-icon").value,
          price: parseInt(document.getElementById("product-price").value),
          stock: parseInt(document.getElementById("product-stock").value),
        };

        if (productId) {
          const product = products.find((p) => p.id == productId);
          Object.assign(product, productData);
          alert("Product updated successfully!");
        } else {
          const newId = Math.max(...products.map((p) => p.id)) + 1;
          products.push({ id: newId, ...productData });
          alert("Product added successfully!");
        }

        loadProducts();
        closeModal("product-modal");
      }

      // Delete Product
      function deleteProduct(productId) {
        if (confirm("Are you sure you want to delete this product?")) {
          products = products.filter((p) => p.id !== productId);
          loadProducts();
          alert("Product deleted successfully!");
        }
      }

      // Load Drivers
      function loadDrivers() {
        const list = document.getElementById("drivers-list");
        list.innerHTML = drivers
          .map(
            (driver) => `
                <div class="driver-card">
                    <div class="driver-info-section">
                        <h4>${driver.name}</h4>
                        <div class="driver-details">
                            üìû ${driver.phone}<br>
                            üöó ${driver.vehicle} (${driver.plate})<br>
                            ${
                              driver.status === "active"
                                ? '<span class="status-badge status-active">Active</span>'
                                : '<span class="status-badge status-inactive">Inactive</span>'
                            }
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-sm btn-primary" onclick="editDriver(${
                          driver.id
                        })">Edit</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteDriver(${
                          driver.id
                        })">Delete</button>
                    </div>
                </div>
            `
          )
          .join("");
      }

      // Add Driver Modal
      function openAddDriverModal() {
        document.getElementById("driver-modal-title").textContent =
          "Add Driver";
        document.getElementById("driver-id").value = "";
        document.getElementById("driver-name").value = "";
        document.getElementById("driver-phone").value = "";
        document.getElementById("driver-vehicle").value = "";
        document.getElementById("driver-plate").value = "";
        document.getElementById("driver-status").value = "active";
        openModal("driver-modal");
      }

      // Edit Driver
      function editDriver(driverId) {
        const driver = drivers.find((d) => d.id === driverId);
        if (!driver) return;

        document.getElementById("driver-modal-title").textContent =
          "Edit Driver";
        document.getElementById("driver-id").value = driver.id;
        document.getElementById("driver-name").value = driver.name;
        document.getElementById("driver-phone").value = driver.phone;
        document.getElementById("driver-vehicle").value = driver.vehicle;
        document.getElementById("driver-plate").value = driver.plate;
        document.getElementById("driver-status").value = driver.status;
        openModal("driver-modal");
      }

      // Save Driver
      function saveDriver(e) {
        e.preventDefault();

        const driverId = document.getElementById("driver-id").value;
        const driverData = {
          name: document.getElementById("driver-name").value,
          phone: document.getElementById("driver-phone").value,
          vehicle: document.getElementById("driver-vehicle").value,
          plate: document.getElementById("driver-plate").value,
          status: document.getElementById("driver-status").value,
        };

        if (driverId) {
          const driver = drivers.find((d) => d.id == driverId);
          Object.assign(driver, driverData);
          alert("Driver updated successfully!");
        } else {
          const newId = Math.max(...drivers.map((d) => d.id)) + 1;
          drivers.push({ id: newId, ...driverData });
          alert("Driver added successfully!");
        }

        loadDrivers();
        closeModal("driver-modal");
      }

      // Delete Driver
      function deleteDriver(driverId) {
        if (confirm("Are you sure you want to delete this driver?")) {
          drivers = drivers.filter((d) => d.id !== driverId);
          loadDrivers();
          alert("Driver deleted successfully!");
        }
      }

      // Load Customers
      function loadCustomers() {
        const tbody = document.getElementById("customers-table");
        tbody.innerHTML = customers
          .map(
            (customer) => `
                <tr>
                    <td><strong>${customer.name}</strong></td>
                    <td>${customer.email}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.orders}</td>
                    <td><strong>‚Ç¶${customer.spent}</strong></td>
                    <td>${customer.joined}</td>
                    <td>
                        <button class="btn btn-sm btn-primary" onclick="viewCustomerDetails(${customer.id})">View</button>
                    </td>
                </tr>
            `
          )
          .join("");
      }

      // View Customer Details
      function viewCustomerDetails(customerId) {
        const customer = customers.find((c) => c.id === customerId);
      }
      // Update Stats
      function updateStats() {
        document.getElementById("total-orders").textContent = orders.length;
        document.getElementById("pending-orders").textContent = orders.filter(
          (o) => o.status === "pending"
        ).length;
      }

      // Modal Functions
      function openModal(modalId) {
        document.getElementById(modalId).classList.add("active");
      }

      function closeModal(modalId) {
        document.getElementById(modalId).classList.remove("active");
      }

      // Show Notifications
      function showNotifications() {
        alert(
          "üîî Notifications:\n\n‚Ä¢ 3 new orders pending approval\n‚Ä¢ Low stock alert: Water (10 left)\n‚Ä¢ Driver Michael Smith completed delivery"
        );
      }

      // Save Settings
      function saveBusinessSettings(e) {
        e.preventDefault();
        alert("Business settings saved successfully!");
      }

      function saveDeliverySettings(e) {
        e.preventDefault();
        alert("Delivery settings saved successfully!");
      }

      // Logout
      function logout() {
        if (confirm("Are you sure you want to logout?")) {
          window.location.href = "index.html";
        }
      }

      // Close modal when clicking outside
      window.onclick = function (event) {
        if (event.target.classList.contains("modal")) {
          event.target.classList.remove("active");
        }
      };
    </script>
  </body>
</html>
